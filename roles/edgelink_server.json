{
	"name": "edgelink_server",
	"chef_type": "role",
	"json_class": "Chef::Role",
	"description": "EdgeLink-managed general server",
	"run_list": [
		"recipe[edgelink_base]",
		"recipe[sshd]",
		"recipe[docker]",
		"recipe[nginx]",
		"recipe[mysql::server]"
	],
	"default_attributes": {
		"edgelink": {
			"firewall": {
				"allowed_tcp_ports": [80, 443, 6667, 8000],
				"allowed_udp_ports": ["60000:61000"]
			}
		},
		"sshd": {
			"sshd_config": {
				"PermitEmptyPasswords": "no",
				"Port": [55022, 8080],
				"TCPKeepAlive": "yes",
				"Match": {
					"group sftponly": {
						"ChrootDirectory": "/home/%u",
						"X11Forwarding": "no",
						"AllowTcpForwarding": "no",
						"ForceCommand": "internal-sftp"
					},
					"group sudo": {
						"PasswordAuthentication": "no"
					},
					"group admin": {
						"PasswordAuthentication": "no"
					}
				}
			}
		}
	}
}
